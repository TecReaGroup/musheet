# TeamInstrumentScore - Independent copy of InstrumentScore for Team
# Contains PDF reference and shared annotations
class: TeamInstrumentScore
table: team_instrument_scores
fields:
  teamScoreId: int, relation(parent=team_scores)
  # Core instrument score fields - matches personal InstrumentScore structure
  instrumentType: String
  customInstrument: String?
  # PDF is shared via pdfHash (global storage)
  pdfHash: String?
  orderIndex: int
  # Shared annotations - all team members see and edit the same annotations
  # Format: [{"id": "uuid", "pageNumber": 1, "type": "draw", "color": "#FF0000", ...}, ...]
  annotationsJson: String?
  # Source tracking (nullable - null means directly created in team)
  sourceInstrumentScoreId: int?
  # Sync fields
  createdAt: DateTime
  updatedAt: DateTime
  deletedAt: DateTime?
  version: int
  syncStatus: String?
indexes:
  team_instrument_score_idx:
    fields: teamScoreId
    type: btree
  # Unique constraint: same team score cannot have duplicate instrument
  team_instrument_score_unique:
    fields: teamScoreId, instrumentType, customInstrument
    unique: true
  team_instrument_score_version_idx:
    fields: teamScoreId, version
    type: btree
